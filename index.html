<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Upload file GitHub</title>
</head>
<body>

<h2>Upload nhiều file</h2>

<input type="file" id="files" multiple>
<button onclick="upload()">Upload</button>

<pre id="out"></pre>

<script>
async function upload() {
  const fs = [...document.getElementById("files").files];
  if (!fs.length) return alert("Chưa chọn file");

  const data = [];

  for (const f of fs) {
    const buf = await f.arrayBuffer();
    data.push({
      name: f.name,
      content: btoa(String.fromCharCode(...new Uint8Array(buf)))
    });
  }

  await fetch(
    "https://api.github.com/repos/ntnhan306/ndlms/actions/workflows/upload.yml/dispatches",
    {
      method: "POST",
      headers: {
        "Authorization": "Bearer YOUR_WORKFLOW_TOKEN",
        "Accept": "application/vnd.github+json",
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        ref: "main",
        inputs: {
          files: JSON.stringify(data)
        }
      })
    }
  );

  document.getElementById("out").textContent =
    fs.map(f =>
      `https://raw.githubusercontent.com/ntnhan306/file/main/${f.name}`
    ).join("\n");
}
</script>

</body>
</html>
